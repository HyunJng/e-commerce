# ğŸ“¦ ecommerce-huge-traffic

## âœ¨ í”„ë¡œì íŠ¸ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” **ëŒ€ê·œëª¨ íŠ¸ë˜í”½ í™˜ê²½ì—ì„œë„ ì•ˆì •ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ì´ì»¤ë¨¸ìŠ¤ í•µì‹¬ ë„ë©”ì¸(ì£¼ë¬¸, ê²°ì œ, ì¿ í°, ë­í‚¹ ë“±)** ì„ ì§ì ‘ ì„¤ê³„í•˜ê³  êµ¬í˜„í•œ ë°±ì—”ë“œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
ë‹¨ìˆœ ê¸°ëŠ¥ êµ¬í˜„ì„ ë„˜ì–´ **ë™ì‹œì„± ì œì–´, ë¶„ì‚° ì‹œìŠ¤í…œ íŒ¨í„´, ì„±ëŠ¥ ìµœì í™”**ì— ì§‘ì¤‘í•˜ì˜€ìœ¼ë©°, ì‹¤ë¬´ì—ì„œ ì‚¬ìš©ë˜ëŠ” **DDD, ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜**ë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤.

---
## ìš”êµ¬ì‚¬í•­
### 1ï¸âƒ£ ì”ì•¡ (Wallet)

* **ì”ì•¡ ì¡°íšŒ**: ì‚¬ìš©ì ì‹ë³„ê°’ìœ¼ë¡œ ì¡°íšŒ, ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš° ì˜¤ë¥˜ ë°˜í™˜
* **ì”ì•¡ ì¶©ì „**: ìµœì†Œ 1,000ì›ë¶€í„° ê°€ëŠ¥, ì¶©ì „ í›„ ì”ì•¡ ë°˜í™˜ ë° ë¡œê·¸ ì ì¬
* **ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­**: ë™ì‹œì„± ì œì–´, ë©±ë“±ì„± ë³´ì¥, ë¡œê·¸ ë¹„ë™ê¸° ì²˜ë¦¬

### 2ï¸âƒ£ ìƒí’ˆ (Product)

* **ìƒí’ˆ ì¡°íšŒ**: ì¸ì¦ ë¶ˆí•„ìš”, ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥˜ ë°˜í™˜
* ìƒí’ˆ ì •ë³´: ID, ì´ë¦„, ê°€ê²©, ìˆ˜ëŸ‰ ì‘ë‹µ

### 3ï¸âƒ£ ì£¼ë¬¸/ê²°ì œ (Order & Payment)

* **ì£¼ë¬¸ ìƒì„±/ê²°ì œ**: ì”ì•¡Â·ì¬ê³ Â·ì¿ í° ìœ íš¨ì„± ê²€ì¦ í›„ ì²˜ë¦¬
* ì£¼ë¬¸ ë‹¹ ì¿ í° 1ê°œ ì‚¬ìš© ê°€ëŠ¥
* ì„±ê³µ ì‹œ ì£¼ë¬¸ID, ê²°ì œê¸ˆì•¡, í• ì¸ê¸ˆì•¡, ì§€ë¶ˆê¸ˆì•¡, ìƒì„±ì¼ì‹œ ì‘ë‹µ ë° ë¡œê·¸ ì ì¬
* **ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­**: ì›ìì„±, ë™ì‹œì„± ì œì–´, ì•ˆì •ì„±, ë©±ë“±ì„±, ì •í•©ì„± ë³´ì¥

### 4ï¸âƒ£ ì¿ í° (Coupon)

* **ì„ ì°©ìˆœ ì¿ í° ë°œê¸‰**: ìˆ˜ëŸ‰ ì œí•œ, ì¤‘ë³µ ë°œê¸‰ ë¶ˆê°€
* ìœ íš¨í•˜ì§€ ì•Šì€ ì‚¬ìš©ìÂ·ì¿ í°ì€ ì˜¤ë¥˜ ë°˜í™˜
* ì„±ê³µ ì‹œ ë°œê¸‰ ì¿ í° ì •ë³´ ì‘ë‹µ
* **ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­**: ê³ íŠ¸ë˜í”½ ëŒ€ì‘, ë™ì‹œì„± ì œì–´, ì •í•©ì„± ìœ ì§€

### 5ï¸âƒ£ ì¸ê¸°ìƒí’ˆ (Ranking)

* **ìµœê·¼ 3ì¼ê°„ íŒë§¤ëŸ‰ ê¸°ì¤€ Top 5 ì¡°íšŒ**
* ìˆ˜ëŸ‰ì´ ì•„ë‹Œ ì£¼ë¬¸ íšŸìˆ˜ ê¸°ì¤€
* **ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­**: ë‹¤ìˆ˜ ë™ì‹œ ìš”ì²­ì—ë„ ë¹ ë¥¸ ì¡°íšŒ ì„±ëŠ¥

## ì„¤ê³„ ë¬¸ì„œ
* [ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨](https://github.com/HyunJng/e-commerce/blob/main/docs/sequence-diagram.md)
* [ERD](https://github.com/HyunJng/e-commerce/blob/main/docs/erd-diagram.md)
* [ì•„í‚¤í…ì²˜ ì„ íƒ](https://github.com/HyunJng/e-commerce/blob/main/docs/architecture-explian.md)
---
## âœ¨ ì£¼ìš” ì„±ê³¼ ë° ê¸°ìˆ ì  ê°•ì¡°ì 

### 1. **ë™ì‹œì„± ì œì–´ & ë¶„ì‚° ë½**
> ğŸ’¡ ë§í¬ë¥¼ ëˆ„ë¥´ë©´ ì‘ì—…ë‚´ìš©ì— ëŒ€í•œ ìì„¸í•œ ë³´ê³ ì„œë‚˜ ë¸”ë¡œê·¸ ê¸€ì„ í™•ì¸ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ì¿ í° ë°œê¸‰, ì£¼ë¬¸/ê²°ì œ, ì§€ê°‘ ì¶©ì „ ë“± **ì›ìì„±ì´ ì¤‘ìš”í•œ ì‹œë‚˜ë¦¬ì˜¤**ì—ì„œ

    * [MySQLì˜ ë‚™ê´€ë½/ë¹„ê´€ë½ ì ìš©](https://github.com/HyunJng/e-commerce/blob/main/docs/db-concurrency-report.md)
    * [Redisson ê¸°ë°˜ ë¶„ì‚°ë½ (AOP ì»¤ìŠ¤í…€ ì• ë…¸í…Œì´ì…˜ ì ìš©)](https://blog.naver.com/khjung1654/223971615936)
* ìˆ˜ì²œ ê±´ì˜ ë™ì‹œ ìš”ì²­ì—ë„ **ì¤‘ë³µ ë°œê¸‰/ì´ì¤‘ ê²°ì œ ë°©ì§€**ë¥¼ ë³´ì¥.

### 2. **ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ & í™•ì¥ì„±**

* ë„ë©”ì¸ ì´ë²¤íŠ¸ë¥¼ **Spring ApplicationEvent** â†’ ì´í›„ [Kafka ê¸°ë°˜](https://github.com/HyunJng/e-commerce/blob/mission/step-17-18/docs/kafka-coupon-report.md)ìœ¼ë¡œ í™•ì¥.
* ì£¼ë¬¸ ìƒì„± â†’ ê²°ì œ ì™„ë£Œ â†’ ì¿ í°/í¬ì¸íŠ¸ ì°¨ê° ê³¼ì •ì„ [MSAë¡œ ê°€ì •í•œ **Saga íŒ¨í„´**ê³¼ **ë³´ìƒ íŠ¸ëœì­ì…˜**ì— ëŒ€í•œ ì„¤ê³„](https://github.com/HyunJng/e-commerce/blob/misson/step-15-16/docs/msa-transition-report.md) ì§„í–‰

### 3. **ìºì‹± & ì„±ëŠ¥ ìµœì í™”**

* [**Redis SortedSet**ì„ í™œìš©í•œ "ì‹¤ì‹œê°„ ì¸ê¸°ìƒí’ˆ ë­í‚¹" êµ¬í˜„](https://github.com/HyunJng/e-commerce/blob/main/docs/redis-ranking-report.md).

    * ìŠ¬ë¼ì´ë”© ìœˆë„ìš° ë°©ì‹ìœ¼ë¡œ ìµœê·¼ 72ì‹œê°„ ë°ì´í„°ë¥¼ ì§‘ê³„.
    * TTL + Aggregation í‚¤ ê´€ë¦¬ ì „ëµìœ¼ë¡œ ë©”ëª¨ë¦¬ ìµœì í™”.
* [**Spring CacheManager â†’ RedisCacheManager**ë¡œ ì „í™˜í•˜ì—¬ ì¡°íšŒ ì„±ëŠ¥ **ì•½ 70% ê°œì„ **](https://github.com/HyunJng/e-commerce/blob/main/docs/cache-report.md)

### 4. **ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ëŒ€ì‘**

* **k6 ë¶€í•˜í…ŒìŠ¤íŠ¸**ë¡œ ì£¼ë¬¸ APIë¥¼ ì´ˆë‹¹ 300 RPS ì´ìƒê¹Œì§€ ê²€ì¦.
* ì„±ëŠ¥ ì§€í‘œ(p95 Latency, Error Rate)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ [**ë³‘ëª© ì§€ì  ë¶„ì„ ë° ê°œì„ **](https://github.com/HyunJng/e-commerce/blob/main/docs/order-load-test-refact.report.md).
* [DB ì¸ë±ìŠ¤ ìµœì í™”ë¡œ ì‘ë‹µ ì†ë„ **40% ê°œì„ **](https://github.com/HyunJng/e-commerce/blob/main/docs/db-optimization-report.md).

### 5. **ì•„í‚¤í…ì²˜ ë° ëª¨ë“ˆí™”**

* [**Clean Architecture**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìœ ìŠ¤ì¼€ì´ìŠ¤ ë‹¨ìœ„ ì„œë¹„ìŠ¤ ì„¤ê³„](https://github.com/HyunJng/e-commerce/blob/main/docs/architecture-explian.md).
* ê¸°ìˆ  ë¶€ì±„ë¥¼ ìµœì†Œí™”í•˜ë©° **MSA ì „í™˜ ê°€ëŠ¥ì„± ê³ ë ¤**.

### 6. **í…ŒìŠ¤íŠ¸ & í’ˆì§ˆ ë³´ì¦**

* Testcontainers (MySQL, Redis, Kafka)ë¡œ í™˜ê²½ ë…ë¦½ì  í†µí•© í…ŒìŠ¤íŠ¸ êµ¬í˜„.
* JUnit5 + Awaitilityë¡œ **ë™ì‹œì„± ì‹œë‚˜ë¦¬ì˜¤ ê²€ì¦** (5,000ê±´ ìš”ì²­ì—ì„œë„ ì¤‘ë³µ ì—†ìŒ).
* Mock + Integration Test í˜¼í•©ìœ¼ë¡œ ë„ë©”ì¸ ë‹¨ìœ„ë¶€í„° ì‹œìŠ¤í…œ ë‹¨ìœ„ê¹Œì§€ ë³´ì¥.

---

## âœ¨ ì‚¬ìš© ê¸°ìˆ  ìŠ¤íƒ

* **Backend**: Java 17, Spring Boot 3.5, Spring Data JPA
* **Database**: MySQL, Redis
* **Messaging**: Kafka
* **Infra & Tools**: Docker Compose, Testcontainers, k6, Logback (MDC Trace)
* **Architecture**: DDD, Clean Architecture, Hexagonal

---

## âœ¨ Before & After (ê°œì¸ ì„±ì¥ í¬ì¸íŠ¸)

* ë‹¨ìˆœ CRUD ìˆ˜ì¤€ì˜ API êµ¬í˜„ â†’ **ë¶„ì‚° ì‹œìŠ¤í…œ, ë™ì‹œì„±, ëŒ€ê·œëª¨ íŠ¸ë˜í”½ ëŒ€ì‘ ì„¤ê³„ ì—­ëŸ‰** í™•ë³´.
* JPA ê¸°ë³¸ í™œìš© â†’ **ë½ ì „ëµ, ì¸ë±ìŠ¤ ì„¤ê³„, ì„±ëŠ¥ íŠœë‹**ì„ í†µí•œ ì‹¤ë¬´ ìˆ˜ì¤€ ë°ì´í„° í•¸ë“¤ë§ ê²½í—˜.
* Redis ë‹¨ìˆœ ìºì‹œ â†’ **SortedSet ê¸°ë°˜ ë­í‚¹, TTL ê´€ë¦¬, Aggregation ë¡œì§**ê¹Œì§€ í™•ì¥.
* ë™ê¸°ì  ì´ë²¤íŠ¸ â†’ **Kafka ê¸°ë°˜ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì•„í‚¤í…ì²˜**ë¡œ í™•ì¥.